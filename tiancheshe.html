<!doctype html>
<meta charset="utf-8">
<title>贪吃蛇</title>
<link id="s1" rel="stylesheet" type="text/css" href="css/css.css"/>
<div align="center"><canvas id="can" width="400" height="400" style="background:deepskyblue;"></canvas></div><a style="color: #00ff64" href="tiancheshe.html">重新开始</a><input id="b7" class="btn" type="button" value="点击显示\隐藏核心代码" onclick="on()"><br><div align="center" id="d1" style="display: none"><h1>核心代码：</h1><code><br>var sn = [ 42, 41 ], dz = 43, fx = 1, n, ctx = document.getElementById("can").getContext("2d"); //can为canvas的id<br>
    function draw(t, c) {<br>
    ctx.fillStyle = c;<br>
    ctx.fillRect(t % 20 * 20 + 1, ~~(t / 20) * 20 + 1, 18, 18);<br>
    }<br>
    document.onkeydown = function(e) {<br>
    fx = sn[1] - sn[0] == (n = [ -1, -20, 1, 20 ][(e || event).keyCode - 37] || fx) ? fx : n <br>
    };<br>
    !function() {<br>
    sn.unshift(n = sn[0] + fx);<br>
    if (sn.indexOf(n, 1) > 0 || n<0||n>399 || fx == 1 && n % 20 == 0 || fx == -1 && n % 20 == 19) return alert("GAME OVER");<br>
    draw(n, "#00ffab");<br>
    if (n == dz) {<br>
    while (sn.indexOf(dz = ~~(Math.random() * 400)) >= 0);<br>
    draw(dz, "#ff0012");<br>
    } else<br>
    draw(sn.pop(), "deepskyblue");<br>
    setTimeout(arguments.callee, 130);<br>
    }();<br>
</code>
</div><br>
<script>
    var sn = [ 42, 41 ], dz = 43, fx = 1, n, ctx = document.getElementById("can").getContext("2d");
    function draw(t, c) {
        ctx.fillStyle = c;
        ctx.fillRect(t % 20 * 20 + 1, ~~(t / 20) * 20 + 1, 18, 18);
    }
    document.onkeydown = function(e) {
        fx = sn[1] - sn[0] == (n = [ -1, -20, 1, 20 ][(e || event).keyCode - 37] || fx) ? fx : n
    };
    !function() {
        sn.unshift(n = sn[0] + fx);
        if (sn.indexOf(n, 1) > 0 || n<0||n>399 || fx == 1 && n % 20 == 0 || fx == -1 && n % 20 == 19)
            return alert("GAME OVER");
        draw(n, "#00ffab");
        if (n == dz) {
            while (sn.indexOf(dz = ~~(Math.random() * 400)) >= 0);
            draw(dz, "#ff0012");
        } else
            draw(sn.pop(), "deepskyblue");
        setTimeout(arguments.callee, 130);
    }();
    function  on() {
        if(document.getElementById('d1').style.display == 'none') {
            document.getElementById('d1').style.display = 'block';
        }else{
            document.getElementById('d1').style.display = 'none';
        }
    }
</script>

</body>
